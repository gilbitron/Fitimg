/*
 * jQuery Fitimg v1.0
 * http://dev7studios.com/fitimg
 *
 * Copyright 2013, Dev7studios
 * Free to use and abuse under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 */

if(typeof console=="undefined"){window.console={log:function(){}}}(function(e,t,n,r){function o(n,r){this.element=n;this.options=e.extend({},s,r);this._defaults=s;this._name=i;var o=this;if(typeof e.fn.imagesLoaded!="undefined"){e(this.element).imagesLoaded(function(){o.run(o.element,o.options);o.options.afterLoad.call(this)})}else{o.run(o.element,o.options);o.options.afterLoad.call(this)}e(t).on("resize",function(){o.run(o.element,o.options)})}var i="fitimg",s={debug:false,afterLoad:function(){}};o.prototype={run:function(t,n){var r=e(t),i=r.find("img:first"),s=0,o=0,u=r.width(),a=r.height();if(n.debug){if(!r.find(".fitimg-debug").length){r.append('<div class="fitimg-debug" />')}}if(!r.hasClass("fitimg"))r.addClass("fitimg");i.removeClass("fitimg-width fitimg-height").show();s=u/a;o=i.width()/i.height();if(n.debug)r.find(".fitimg-debug").html("Aspect: "+s+"<br />Img: "+o);if(s==1||o>1){if(o<=1){var f=0;if(u<=i.width())f=(u-i.width())/2+"px";i.addClass("fitimg-width").css({"margin-top":(a-i.height())/2+"px","margin-left":f})}else{var l=0;if(a<=i.height())l=(a-i.height())/2+"px";i.addClass("fitimg-height").css({"margin-top":l,"margin-left":(u-i.width())/2+"px"})}}else if(s<=1){var l=0;if(a<=i.height())l=(a-i.height())/2+"px";i.addClass("fitimg-height").css({"margin-top":l,"margin-left":(u-i.width())/2+"px"})}else{var f=0;if(u<=i.width())f=(u-i.width())/2+"px";i.addClass("fitimg-width").css({"margin-top":(a-i.height())/2+"px","margin-left":f})}if(!i.hasClass("fitimg-loaded"))i.addClass("fitimg-loaded")}};e.fn[i]=function(t){if(typeof e.fn.imagesLoaded=="undefined"){console.warn("Fitimg works better with https://github.com/desandro/imagesloaded installed.")}return this.each(function(){if(!e.data(this,"plugin_"+i)){e.data(this,"plugin_"+i,new o(this,t))}})}})(jQuery,window,document)